# 需求规格说明书

## 1. 引言

### 1.1 文档目的

本文档详细描述了VidTimelineX项目的功能增强需求，包括数据隔离和GUI界面开发。文档旨在为开发团队提供明确的需求指导，确保开发的系统能够满足用户的期望和要求。

### 1.2 术语定义

| 术语 | 解释 |
|------|------|
| 甜筒 | 一种数据类型，对应特定的视频数据集合 |
| 驴酱 | 另一种数据类型，对应特定的视频数据集合 |
| BV号 | B站视频的唯一标识符 |
| 爬虫 | 自动获取网络数据的程序 |
| 时间线 | 按时间顺序排列的视频列表 |
| GUI | 图形用户界面 |

## 2. 项目概述

### 2.1 项目背景

现有系统是一个B站视频爬虫系统，主要通过命令行界面操作，使用JSON文件存储数据。系统缺乏数据隔离机制和直观的用户界面，需要通过本次功能增强来解决这些问题。

### 2.2 项目目标

- 实现甜筒和驴酱数据的完全隔离
- 开发直观易用的GUI界面
- 提高系统的可管理性和用户体验
- 保持与现有系统功能的兼容性

### 2.3 项目范围

- **数据隔离**：实现甜筒和驴酱数据的存储隔离、配置隔离和代码隔离
- **GUI界面**：开发覆盖所有现有功能的图形用户界面
- **系统优化**：提高系统的可维护性和扩展性

## 3. 功能需求

### 3.1 数据隔离功能

#### 3.1.1 存储层隔离

- **目录结构**：为甜筒和驴酱创建独立的数据目录
- **数据文件**：每种数据类型拥有独立的JSON文件
- **封面存储**：每种数据类型拥有独立的封面存储目录

#### 3.1.2 配置层隔离

- **配置管理**：支持每种数据类型的特定配置
- **路径管理**：根据数据类型动态生成路径

#### 3.1.3 代码层隔离

- **数据类型枚举**：定义数据类型常量
- **存储逻辑**：基于数据类型的存储和读取
- **业务逻辑**：数据类型相关的业务逻辑隔离

### 3.2 GUI界面功能

#### 3.2.1 核心功能

- **数据类型管理**：支持甜筒和驴酱数据的切换和管理
- **爬虫功能**：从文件爬取和关键词爬取
- **数据管理**：视频审核、时间线生成
- **封面管理**：封面下载和管理
- **系统设置**：配置管理

#### 3.2.2 辅助功能

- **日志显示**：实时显示系统操作日志
- **错误提示**：详细的错误信息和解决建议
- **帮助文档**：内置操作指南
- **快捷键支持**：常用操作的快捷键
- **主题支持**：明亮/暗黑主题切换

### 3.3 现有功能保持

- **从文件爬取**：读取BV号文件，爬取对应视频元数据
- **关键词爬取**：根据关键词搜索视频并爬取元数据
- **视频元数据爬取**：爬取视频标题、描述、发布时间、播放量等信息
- **数据去重**：避免重复爬取相同视频
- **数据分类**：待审核、已通过、已拒绝
- **时间线生成**：生成排序后的时间线数据
- **封面管理**：下载和管理视频封面

## 4. 非功能需求

### 4.1 性能需求

- **响应时间**：GUI操作响应时间不超过1秒
- **后台任务**：后台任务不影响UI性能
- **内存占用**：正常运行时内存占用不超过500MB
- **CPU占用**：正常运行时CPU占用不超过20%

### 4.2 可用性需求

- **直观性**：界面布局直观，操作流程清晰
- **一致性**：界面风格一致，操作逻辑统一
- **容错性**：对用户错误操作有合理的容错和提示
- **可访问性**：考虑不同用户的使用习惯

### 4.3 可靠性需求

- **稳定性**：长时间运行稳定，无内存泄漏
- **错误处理**：完善的错误处理机制
- **数据安全**：确保数据操作的安全性
- **数据完整性**：确保数据的完整性和一致性

### 4.4 兼容性需求

- **操作系统**：支持Windows 11
- **Python版本**：兼容Python 3.8+
- **依赖管理**：自动处理依赖安装
- **向后兼容**：保持与现有系统功能的兼容性

### 4.5 扩展性需求

- **未来数据类型**：支持添加新的数据类型
- **配置扩展**：支持通过配置文件扩展功能
- **模块扩展**：支持模块化扩展系统功能

## 5. 数据需求

### 5.1 数据结构

#### 5.1.1 目录结构

```
data/
├── common/              # 公共数据
│   └── bv-lists/        # BV号文件目录
│       ├── lvjiang-bv.txt    # 驴酱BV号文件
│       └── tiantong-bv.txt   # 甜筒BV号文件
├── lvjiang/             # 驴酱数据
│   ├── pending.json     # 待审核视频
│   ├── approved.json    # 已通过视频
│   ├── rejected.json    # 已拒绝视频
│   ├── videos.json      # 时间线数据
│   └── thumbs/          # 封面图片
├── tiantong/            # 甜筒数据
│   ├── pending.json     # 待审核视频
│   ├── approved.json    # 已通过视频
│   ├── rejected.json    # 已拒绝视频
│   ├── videos.json      # 时间线数据
│   └── thumbs/          # 封面图片
└── [其他类型]/           # 未来扩展
```

#### 5.1.2 数据格式

视频数据格式：

```json
{
  "bv": "视频BV号",
  "url": "视频URL",
  "title": "视频标题",
  "description": "视频描述",
  "publish_date": "发布日期",
  "views": 播放量,
  "danmaku": 弹幕数,
  "up主": "UP主名称",
  "cover_url": "封面图片URL",
  "thumbnail": "封面图片路径",
  "duration": "视频时长",
  "crawled_at": "爬取时间",
  "review_status": "审核状态",
  "review_note": "审核备注"
}
```

### 5.2 数据迁移

- **现有数据**：将现有数据迁移到新的目录结构
- **数据验证**：确保迁移后的数据完整性
- **回滚机制**：提供数据迁移的回滚机制

## 6. 范围限定

- **用户认证**：不需要设计用户认证系统，个人使用
- **网络要求**：需要稳定的网络连接用于爬取视频数据
- **存储要求**：需要足够的存储空间存储视频数据和封面图片
- **性能要求**：系统性能应满足个人使用需求

## 7. 验收标准

### 7.1 功能验收

- **数据隔离**：甜筒和驴酱数据完全隔离，操作互不影响
- **GUI功能**：所有命令行功能都有对应的GUI实现
- **功能完整性**：每个功能都能正常工作
- **功能一致性**：GUI功能与命令行功能结果一致

### 7.2 界面验收

- **布局**：界面布局合理，元素排列整齐
- **导航**：导航结构清晰，操作流程顺畅
- **反馈**：操作有明确的反馈，错误有详细的提示
- **响应**：界面响应及时，无明显卡顿

### 7.3 性能验收

- **响应时间**：GUI操作响应时间不超过1秒
- **内存占用**：正常运行时内存占用不超过500MB
- **CPU占用**：正常运行时CPU占用不超过20%
- **稳定性**：长时间运行稳定，无崩溃

### 7.4 兼容性验收

- **操作系统**：在Windows 11上正常运行
- **Python版本**：兼容Python 3.8+
- **依赖管理**：依赖安装正常，无冲突
- **向后兼容**：与现有系统功能兼容

## 8. 风险评估

### 8.1 潜在风险

1. **数据丢失**：迁移过程中可能出现数据丢失
2. **功能回归**：修改可能导致现有功能失效
3. **性能下降**：新增的路径管理可能影响性能
4. **技术复杂度**：GUI开发可能比预期复杂
5. **兼容性问题**：不同系统环境可能存在兼容性问题

### 8.2 风险缓解措施

1. **数据备份**：在迁移前完全备份现有数据
2. **测试覆盖**：确保充分的测试覆盖
3. **性能优化**：优化路径管理和数据访问逻辑
4. **技术选型**：选择成熟的GUI框架
5. **多环境测试**：在不同系统环境下进行测试

## 9. 项目实施

### 9.1 实施阶段

1. **需求分析与规划阶段**：分析现有系统，制定需求
2. **系统设计阶段**：设计系统架构，GUI界面
3. **开发实现阶段**：实现数据隔离，开发GUI界面
4. **测试验证阶段**：测试系统功能，验证需求
5. **部署上线阶段**：部署系统，编写文档

### 9.2 里程碑

- **需求分析完成**：输出需求规格说明书
- **系统设计完成**：输出系统设计文档
- **开发实现完成**：完成代码开发
- **测试验证完成**：输出测试报告
- **部署上线完成**：系统上线运行

### 9.3 交付物

- **源代码**：完整的源代码及构建脚本
- **文档**：各阶段输出的规范文档
- **测试报告**：系统测试报告
- **用户手册**：用户操作手册
- **部署指南**：系统部署指南

## 10. 总结

本文档详细描述了VidTimelineX项目的功能增强需求，包括数据隔离和GUI界面开发。通过实施这些需求，可以显著提高系统的可管理性和用户体验，为用户提供更加直观、高效的视频管理工具。

开发团队应严格按照本文档的需求进行开发，确保最终交付的系统能够满足用户的期望和要求。同时，应关注系统的可维护性和扩展性，为未来的功能扩展做好准备。