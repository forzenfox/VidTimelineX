# 老虎主题UI优化测试脚本

## 概述

本测试脚本用于验证「虎大将军」主题UI优化的所有功能是否符合需求文档要求，确保UI设计符合视觉规范、交互体验流畅自然、兼容性良好。

## 目录结构

```
tests/tiger-theme/
├── visual-baseline.test.tsx    # 核心视觉基底测试（TC-001 ~ TC-004）
├── content-area.test.tsx        # 核心内容区测试（TC-005 ~ TC-008）
├── interaction.test.tsx          # 交互动效测试（TC-009 ~ TC-011）
├── details.test.tsx             # 细节打磨测试（TC-012 ~ TC-013）
├── compatibility.test.tsx       # 兼容性测试（TC-014 ~ TC-016）
├── performance.test.tsx        # 性能测试（TC-017 ~ TC-019）
└── README.md                   # 本文档
```

## 测试用例说明

### 核心视觉基底测试（TC-001 ~ TC-004）
- **TC-001**: 全局主色调切换 - 验证老虎主题配色符合需求文档
- **TC-002**: 页面背景虎纹肌理 - 验证页面背景正确渲染
- **TC-003**: 顶部导航栏视觉升级 - 验证导航栏基本渲染
- **TC-004**: 主题切换按钮强化 - 验证主题切换按钮的样式和功能

### 核心内容区测试（TC-005 ~ TC-008）
- **TC-005**: 视频卡片视觉升级 - 验证视频卡片的样式和交互
- **TC-006**: 互动区弹幕气泡虎将化适配 - 验证不同用户类型的弹幕样式
- **TC-007**: 视频分类标签虎纹化升级 - 验证分类标签的样式和交互
- **TC-008**: 互动区榜单标签强化 - 验证榜单标签的样式和交互

### 交互动效测试（TC-009 ~ TC-011）
- **TC-009**: 主题切换过渡动效 - 验证主题切换时的动画效果
- **TC-010**: 元素hover反馈动效 - 验证hover时的反馈效果
- **TC-011**: 加载动画替换 - 验证加载动画的显示和消失

### 细节打磨测试（TC-012 ~ TC-013）
- **TC-012**: 页面边角装饰图标 - 验证装饰图标的显示
- **TC-013**: 文案风格统一 - 验证文案风格的统一性

### 兼容性测试（TC-014 ~ TC-016）
- **TC-014**: 桌面端兼容性 - 验证在桌面浏览器中的兼容性
- **TC-015**: 平板端兼容性 - 验证在平板设备上的兼容性
- **TC-016**: 不支持手机设备 - 验证在手机设备上的友好提示

### 性能测试（TC-017 ~ TC-019）
- **TC-017**: 页面加载时间 - 测试组件渲染时间
- **TC-018**: 动画帧率 - 测试组件交互性能
- **TC-019**: 主题切换时间 - 测试主题切换响应时间

## 环境要求

### 系统要求
- 操作系统：Windows 10/11、macOS 13+
- Node.js：18.0.0+
- 内存：8GB+

### 软件要求
- 测试框架：Jest
- 测试库：React Testing Library
- 浏览器：Chrome 120+、Firefox 115+、Safari 16+、Edge 120+

## 安装步骤

1. 确保项目依赖已安装：
```bash
npm install
```

2. 确保Jest配置正确（jest.config.js已包含tests/tiger-theme目录）

## 测试执行

### 执行所有老虎主题测试
```bash
npm test -- tests/tiger-theme
```

### 执行特定测试文件
```bash
# 执行核心视觉基底测试
npm test -- tests/tiger-theme/visual-baseline.test.tsx

# 执行核心内容区测试
npm test -- tests/tiger-theme/content-area.test.tsx

# 执行交互动效测试
npm test -- tests/tiger-theme/interaction.test.tsx

# 执行细节打磨测试
npm test -- tests/tiger-theme/details.test.tsx

# 执行兼容性测试
npm test -- tests/tiger-theme/compatibility.test.tsx

# 执行性能测试
npm test -- tests/tiger-theme/performance.test.tsx
```

### 执行特定测试用例
```bash
# 执行TC-001测试用例
npm test -- -t "TC-001"

# 执行所有视觉基底测试用例
npm test -- -t "核心视觉基底测试"
```

### 监听模式（自动重新运行测试）
```bash
npm test -- tests/tiger-theme --watch
```

### 生成覆盖率报告
```bash
npm test -- tests/tiger-theme --coverage
```

## 测试结果

### 测试输出示例
```
Test Suites: 6 passed, 6 total
Tests:       19 passed, 19 total
Snapshots:   0 total
Time:        6.155 s
```

### 控制台输出
每个测试用例执行后，会在控制台输出测试结果：
```
✅ TC-001: 全局主色调切换测试通过
✅ TC-002: 页面背景虎纹肌理测试通过
✅ TC-003: 顶部导航栏视觉升级测试通过
...
```

## 测试通过标准

### 功能通过标准
- P0级测试用例（TC-001 ~ TC-004）：100%通过
- P1级测试用例（TC-009 ~ TC-011, TC-017 ~ TC-019）：95%以上通过
- P2级测试用例（TC-005 ~ TC-008, TC-012 ~ TC-013）：90%以上通过

### 性能通过标准
- 页面加载时间：<1000ms
- 主题切换时间：<500ms
- 平均交互时间：<100ms

## 常见问题

### Q: 测试失败怎么办？
A: 检查以下几点：
1. 确保项目依赖已正确安装
2. 确保Jest配置正确
3. 查看错误日志定位问题
4. 确保组件实现与测试用例匹配

### Q: 如何修改测试用例？
A: 编辑对应的测试文件，修改测试步骤和断言逻辑，然后重新运行测试。

### Q: 如何添加新的测试用例？
A: 在对应的测试文件中添加新的test函数，按照现有格式编写测试用例。

### Q: 测试报告在哪里？
A: 测试结果会在控制台输出，可以使用 `--coverage` 参数生成覆盖率报告。

### Q: 如何调试失败的测试？
A: 使用 `--watch` 模式，或者在测试文件中添加 `console.log` 进行调试。

## 维护说明

### 定期维护任务
1. 更新测试用例以反映最新的需求变更
2. 维护测试数据以确保测试场景的真实性
3. 优化测试脚本以提高执行效率
4. 及时修复发现的缺陷

### 测试用例扩展
当需要添加新的测试场景时：
1. 确定测试用例ID（如TC-020）
2. 选择合适的测试文件
3. 添加新的test函数
4. 编写测试步骤和断言
5. 运行测试验证

### 代码规范
- 使用UTF-8编码
- 添加详细的中文注释
- 遵循项目现有的代码风格
- 使用项目现有的组件导入方式（@ 别名）

## 技术栈

- **测试框架**: Jest
- **测试库**: React Testing Library (@testing-library/react)
- **断言库**: Jest内置断言
- **DOM模拟**: jsdom

## 参考文档

- [老虎主题UI优化需求验收测试用例文档](../../doc/老虎主题UI优化需求验收测试用例文档.md)
- [老虎主题UI优化测试计划](../../doc/老虎主题UI优化测试计划.md)
- [Jest官方文档](https://jestjs.io/)
- [React Testing Library官方文档](https://testing-library.com/react)

## 版本历史

| 版本 | 更新日期 | 更新内容 | 责任人 |
|------|----------|----------|--------|
| V1.0 | 2026-01-24 | 初始版本，完成所有19个测试用例编写 | 测试团队 |

---

**文档版本**: V1.0
**最后更新**: 2026-01-24
**维护人员**: 测试团队
