# 交互元素行为文档


## 1. 文档信息

- **文档名称**：交互元素行为文档
- **版本**：1.0
- **最后更新**：2026-01-28
- **作者**：UI 设计团队
- **适用范围**：亿口甜筒·时光视频集应用

## 2. 交互元素分类

### 2.1 基础交互元素

- **按钮**：包括主按钮、次要按钮、文本按钮等
- **输入框**：文本输入、搜索输入等
- **链接**：内部链接、外部链接等
- **开关**：主题切换开关等

### 2.2 复合交互元素

- **模态框**：视频播放模态框等
- **标签页**：侧边栏标签页等
- **下拉菜单**：导航下拉菜单等
- **时间线**：视频时间线等

### 2.3 特殊交互元素

- **弹幕**：水平弹幕、侧边弹幕等
- **装饰元素**：页面边角装饰图标等
- **滚动触发元素**：滚动时的动画效果等

## 3. 交互行为规格

### 3.1 基础交互行为

#### 3.1.1 按钮交互

| 状态 | 行为 | 视觉反馈 |
|------|------|----------|
| 常态 | 静态显示 | 标准样式 |
| 悬停 | 鼠标指针变为指针样式 | 轻微放大效果，背景色变化 |
| 点击 | 按下状态 | 按下效果，背景色加深 |
| 禁用 | 不可点击 | 半透明效果，鼠标指针变为禁止样式 |

#### 3.1.2 输入框交互

| 状态 | 行为 | 视觉反馈 |
|------|------|----------|
| 常态 | 静态显示 | 标准边框样式 |
| 聚焦 | 接收输入 | 边框颜色变化，出现焦点环 |
| 输入中 | 实时显示输入内容 | 内容实时更新 |
| 错误 | 输入验证失败 | 边框变为红色，显示错误提示 |

### 3.2 页面特定交互行为

#### 3.2.1 甜筒页面（TiantongPage）

1. **主题切换**：
   - **触发方式**：点击主题切换按钮
   - **行为**：切换应用的明暗主题
   - **视觉反馈**：
     - 平滑的背景色过渡动画
     - 文本颜色变化
     - 卡片和其他元素的样式变化
     - 主题切换按钮的图标变化
   - **技术实现**：使用 `data-theme` 属性和 CSS 变量

2. **视频时间线交互**：
   - **触发方式**：点击时间线卡片
   - **行为**：打开视频播放模态框
   - **视觉反馈**：
     - 卡片悬停效果
     - 模态框淡入动画
     - 视频加载状态显示

3. **侧边弹幕交互**：
   - **标签切换**：点击标签栏切换不同标签
   - **弹幕滚动**：自动滚动显示最新弹幕
   - **输入发送**：输入弹幕内容并发送
   - **视觉反馈**：
     - 标签切换时的内容变化
     - 新弹幕的出现动画
     - 发送按钮的点击效果

4. **水平弹幕交互**：
   - **行为**：自动从右向左滚动
   - **视觉反馈**：
     - 平滑的滚动动画
     - 不同类型弹幕的样式差异
     - 鼠标悬停时的暂停效果

#### 3.2.2 驴酱页面（LvjiangPage）

1. **视频时间线交互**：
   - **触发方式**：点击时间线卡片
   - **行为**：打开视频播放模态框
   - **视觉反馈**：
     - 卡片悬停效果
     - 模态框淡入动画

2. **侧边弹幕交互**：
   - **标签切换**：点击标签栏切换不同标签
   - **弹幕滚动**：自动滚动显示最新弹幕
   - **输入发送**：输入弹幕内容并发送

3. **水平弹幕交互**：
   - **行为**：自动从右向左滚动
   - **视觉反馈**：
     - 平滑的滚动动画
     - 不同类型弹幕的样式差异

### 3.3 模态框交互

1. **视频模态框（VideoModal）**：
   - **打开方式**：点击视频卡片
   - **关闭方式**：
     - 点击关闭按钮
     - 点击模态框外部
     - 按下 ESC 键
   - **视觉反馈**：
     - 打开时的淡入动画
     - 关闭时的淡出动画
     - 加载时的加载动画

2. **交互行为**：
   - **视频播放/暂停**：点击视频播放器控制
   - **音量控制**：拖动音量滑块
   - **全屏切换**：点击全屏按钮

### 3.4 滚动交互

1. **页面滚动**：
   - **行为**：平滑滚动效果
   - **视觉反馈**：
     - 滚动时的视差效果
     - 滚动触发的动画

2. **侧边栏滚动**：
   - **行为**：独立滚动
   - **视觉反馈**：
     - 滚动条样式
     - 滚动时的内容变化

### 3.5 动画交互

1. **页面加载动画**：
   - **行为**：页面加载时显示
   - **视觉反馈**：
     - 旋转动画
     - 淡入淡出效果

2. **元素进入动画**：
   - **触发方式**：滚动到可视区域
   - **行为**：元素淡入或滑入
   - **视觉反馈**：
     - 透明度变化
     - 位置变化

3. **弹幕动画**：
   - **行为**：从右向左滚动
   - **视觉反馈**：
     - 平滑的滚动效果
     - 不同速度的弹幕

## 4. 交互性能优化

### 4.1 动画性能

- **使用 CSS 动画**：优先使用 CSS 动画而非 JavaScript 动画
- **硬件加速**：使用 `transform` 和 `opacity` 触发硬件加速
- **动画持续时间**：保持动画持续时间在合理范围内（100-300ms）
- **帧率控制**：确保动画帧率稳定，避免卡顿

### 4.2 响应速度

- **点击响应**：按钮点击响应时间 < 100ms
- **输入反馈**：输入框实时反馈
- **页面切换**：页面切换动画流畅

### 4.3 可访问性

- **键盘导航**：支持键盘 Tab 键导航
- **屏幕阅读器**：支持屏幕阅读器
- **足够的点击区域**：按钮和可点击元素的最小尺寸为 44x44px
- **颜色对比度**：符合 WCAG AA 标准的颜色对比度

## 5. 交互行为实现指南

### 5.1 技术实现

1. **使用 React 状态管理**：
   - 使用 `useState` 管理组件状态
   - 使用 `useCallback` 优化事件处理函数
   - 使用 `useEffect` 处理副作用

2. **CSS 实现**：
   - 使用 Tailwind CSS 工具类
   - 使用 CSS 变量实现主题切换
   - 使用 CSS 动画实现平滑过渡

3. **动画库**：
   - 可以考虑使用 Framer Motion 等动画库增强交互效果

### 5.2 最佳实践

1. **保持一致性**：相同类型的元素使用一致的交互行为
2. **提供明确反馈**：所有用户操作都应该有明确的视觉反馈
3. **避免过度动画**：动画应该增强用户体验，而不是干扰
4. **考虑不同设备**：确保交互在不同设备上都能正常工作
5. **测试交互效果**：在不同浏览器和设备上测试交互效果

## 6. 版本控制与变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|----------|------|
| 1.0 | 2026-01-28 | 初始文档创建 | UI 设计团队 |

## 7. 参考资料

- **代码文件**：
  - `src/features/tiantong/components/ThemeToggle.tsx`
  - `src/features/tiantong/components/VideoModal.tsx`
  - `src/features/tiantong/components/SidebarDanmu.tsx`
  - `src/features/tiantong/components/HorizontalDanmaku.tsx`

- **样式文件**：
  - `src/styles/globals.css`
  - `src/features/tiantong/styles/tiantong.css`
  - `src/features/lvjiang/styles/index.css`