# 测试 download_thumbs.py 脚本

## 测试目标
验证脚本能否正确从 Bilibili 视频页面获取缩略图，并更新时间线 JSON 文件，同时在虚拟环境中进行测试。

## 测试步骤

1. **创建虚拟环境**
   - 在项目目录中创建虚拟环境
   - 命令：`python -m venv venv`

2. **激活虚拟环境**
   - Windows PowerShell：`venv\Scripts\Activate.ps1`

3. **安装依赖**
   - 在虚拟环境中安装 requests 库
   - 命令：`pip install requests`

4. **运行脚本**
   - 使用现有的 data/timeline.json 文件作为输入
   - 指定 media/thumbs 作为输出目录
   - 命令：`python download_thumbs.py data/timeline.json media/thumbs`

5. **验证结果**
   - 检查 media/thumbs 目录是否创建并包含下载的缩略图
   - 检查是否生成了 data/timeline.withthumbs.json 文件
   - 验证新 JSON 文件中的 media.thumbnail 字段是否已更新为相对路径

6. **测试异常情况**
   - 验证脚本对无效 URL 的处理
   - 验证脚本对非 Bilibili 链接的跳过逻辑

## 预期结果
- 虚拟环境成功创建并激活
- 依赖库成功安装
- 脚本成功下载两个示例视频的缩略图
- 生成的新 JSON 文件中包含指向本地缩略图的路径
- 控制台输出显示每个步骤的执行情况

## 注意事项
- 脚本会在请求之间延迟 0.8 秒，测试过程中需要耐心等待
- 确保网络连接正常，能够访问 Bilibili 网站
- 虚拟环境激活后，所有命令都会在隔离环境中执行